/*******************************************************************************
* @file    stm8s_wd.c
* @author  钟昊翰
* @version V1.0.0
* @date    2017-09-25
* @brief   该文件为看门狗配置源文件
*******************************************************************************/

/* Includes ------------------------------------------------------------------*/
#include"main.h"
#include"drive.h"
#include"stm8s_wd.h"

/* 私有常量 ----------------------------------------------------------------- */
/* 私有类型 ------------------------------------------------------------------*/
/* 私有定义 ------------------------------------------------------------------*/
/* 私有变量 ------------------------------------------------------------------*/
/* 私有函数 ------------------------------------------------------------------*/

/**
  *  功能说明:  独立看门狗初始化(最长喂狗时间1.02s)
  */
void f_IWD_Init(void)
{
    IWDG_KR  = 0xcc;  /* 启动看门狗                      */
	IWDG_KR  = 0x55;  /* 看门狗寄存器去保护              */
	IWDG_RLR = 0xff;  /* 看门狗重新装载数值              */
	IWDG_PR  = 0x06;  /* 64K的128分频,最长1.02S          */
	IWDG_KR  = 0xaa;  /* 看门狗寄存器保护,同时启动看门狗 */
}