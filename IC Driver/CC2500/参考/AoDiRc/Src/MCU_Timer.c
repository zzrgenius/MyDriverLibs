/******************************************************************************

                  版权所有 (C), 2008-2018, 杭州信多达电器有限公司

 ******************************************************************************
  文 件 名   : MCU_Timer.c
  版 本 号   : V1.0
  作    者   : zhufeng
  生成日期   : 2018年4月27日
  最近修改   :
  功能描述   : 定时器
  函数列表   :
              __attribute
  修改历史   :
  1.日    期   : 2018年4月27日
    作    者   : zhufeng
    修改内容   : 创建文件

******************************************************************************/
#define VAR_TIMER_GLOBALS
#include "Include.h"
/*----------------------------------------------*
 * 包含头文件                                        *
 *----------------------------------------------*/

/*----------------------------------------------*
 * 外部变量说明                                       *
 *----------------------------------------------*/

/*----------------------------------------------*
 * 外部函数原型说明                                     *
 *----------------------------------------------*/

/*----------------------------------------------*
 * 内部函数原型说明                                     *
 *----------------------------------------------*/

/*----------------------------------------------*
 * 全局变量                                         *
 *----------------------------------------------*/

/*----------------------------------------------*
 * 模块级变量                                        *
 *----------------------------------------------*/

/*----------------------------------------------*
 * 常量定义                                         *
 *----------------------------------------------*/

/*----------------------------------------------*
 * 宏定义                                          *
 *----------------------------------------------*/

//static uchar n5msCnt = 0;
static uchar n10msCnt = 0;
static uchar n100msCnt = 0; 
//static uint	 n500msCnt = 0; 
//static uint  n1000msCnt = 0;
/*****************************************************************************
 函 数 名: __attribute
 功能描述  : stm定时中断
 输入参数: (interrupt(0x0c))  
 返 回 值: 
 注     意: 
 
 修改历史:
  1.日    期   : 2018年4月27日
    作    者   : zhufeng
    修改内容    : 新生成函数

*****************************************************************************/
void __attribute((interrupt(0x0c))) f_Time0_ISR(void)
{
	if(_t0af==1)
	{
		_t0af=0;
		
//		n5msCnt ++;
		n10msCnt ++;
		n100msCnt ++;
//		n500msCnt ++;
//		n1000msCnt ++;
//		if(n5msCnt > 4)
//		{
//			n5msCnt = 0;
//			b5msFlag = true;
//		}
		if(n10msCnt > 9)
		{
			n10msCnt = 0;
			b10msFlag = true;
		}
		if(n100msCnt > 99)
		{
			n100msCnt = 0;
			b100msFlag = true;
		}
//		if(n500msCnt > 499)
//		{
//			n100msCnt = 0;
//			b500msFlag = true;
//		}
//		if(n1000msCnt > 999)
//		{
//			n1000msCnt = 0;
//			b1sFlag = true;
//		}
	}
	
}
